---
title: "[solved] ssh: connect to host github.com port 22: Connection refused"
date: 2022-05-29T14:08:01+08:00
author: jt chen
draft: false
---

### 怀疑wifi问题
- 只需断开wifi，链接新的热点，发现还是有问题！
  
### 怀疑是github本身坏掉了
1. 询问身边朋友 ---- 484github崩了？ ---- 结果：没人理我
2. https://www.githubstatus.com/ 观察到一切正常，故排除

### 怀疑是代理问题，以及system proxy问题
- 代理没有修改过，仍能正确访问youtube、google

### 怀疑是ssh问题
- 采用网上广泛使用的配置`~/.ssh/config`方法，将github的push端口配置到443
- 这显然是违背常理的，因为443是SSL端口；而且确实行不通。
- 重装openssh, 依然无法解决。。

### 怀疑是name resolve问题
- 采用debug模式访问
```shell
ssh -vT git@github.com
```
- 果然出现了预想中情况 ---- github被解析为127.0.0.1
```
jt@jt-arch ~/Desktop/blog [master *]
± % ssh -vT  git@github.com

OpenSSH_9.0p1, OpenSSL 1.1.1o  3 May 2022
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Connecting to github.com [::1] port 22.
debug1: connect to address ::1 port 22: Connection refused
debug1: Connecting to github.com [127.0.0.1] port 22.
debug1: connect to address 127.0.0.1 port 22: Connection refused
ssh: connect to host github.com port 22: Connection refused
```

## 解决方案
- 在/etc/resolv.conf 添加最后一行8.8.8.8
```txt
# Generated by NetworkManager
# 注意要添加在首行
nameserver 8.8.8.8
nameserver 192.168.10.1
nameserver fe80::a:1%wlo1
```
- 会不会引起什么意外效应还有待评估～